# プロダクト要求仕様 (PRD) — Workspace Optimization Project

## プロジェクト概要
- `/Users/shunsuke` 配下に散在する開発リポジトリと学習素材を標準化された `~/workspace` 構造へ統合する。
- ログ駆動開発 (Log-Driven Development; LDD) に準拠し、全作業を `.ai/` 配下のドキュメント・ログで追跡する。
- 再現可能な移行手順と、移行後のディレクトリマネジメント運用ルールを確立する。

## ターゲットユーザー
- ローカル環境で複数の AI/エージェント案件を並行開発する開発者 (Shunsuke)。
- 下流ツール (Cursor, Roo, Devin) の連携設定を保持する必要があるサポートエージェント。

## 成功指標 (KPI)
- `docs/inventory.md` のカバレッジが対象ディレクトリ 100% に到達。
- `~/workspace` 配下に想定6カテゴリ (active/incubate/archive/learning/tools/data) が作成済み。
- 移行フェーズ完了後、Git リポジトリの `origin` 設定がすべて動作し、`git status` で未解決差分 0。
- Post-migration review で定義する改善アクションが 2 件以下に留まる。

## エピック一覧
| Epic ID  | タイトル                          | 概要                                                          | 状態     |
|----------|-----------------------------------|---------------------------------------------------------------|----------|
| EPIC-001 | 基礎調査と分類ポリシー            | 現状棚卸しと分類ルール策定により移行の前提条件を整備する。    | pending  |
| EPIC-002 | ワークスペース基盤整備            | `~/workspace` のスキャフォールディングとカテゴリ配置を定義。 | pending  |
| EPIC-003 | 移行実行と検証                    | 実際のディレクトリ移動、検証、ログ記録を行う。                | pending  |
| EPIC-004 | 運用ガバナンスと振り返り          | ポストモーテム、運用ルール整備、改善提案をまとめる。          | pending  |

### EPIC-001 基礎調査と分類ポリシー
- ストーリー: STORY-001, STORY-002
- ゴール: 全対象ディレクトリの属性 (更新日、用途、依存関係) を可視化し、カテゴリ判定ルールを承認済みにする。

### EPIC-002 ワークスペース基盤整備
- ストーリー: STORY-003, STORY-004
- ゴール: `~/workspace` の実体を作成し、各プロジェクトの移行先マッピングと検証手順を確定する。

### EPIC-003 移行実行と検証
- ストーリー: STORY-005
- ゴール: 計画通りにリポジトリを移動し、CI/IDE/スクリプト設定が動作することを確認する。

### EPIC-004 運用ガバナンスと振り返り
- ストーリー: STORY-006
- ゴール: 移行結果をレビューし、今後のメンテナンス手順と改善項目を設定する。

## スコープ
### スコープ内
- ローカルファイルシステム上のディレクトリ再配置。
- `docs/` 以下のドキュメント更新とテンプレート整備。
- Git リモート URL とローカルスクリプト (エイリアス、Makefile) の参照先更新確認。

### スコープ外
- クラウドストレージ (Dropbox, Google Drive) への自動同期設定。
- GitHub Actions や他CI のリポジトリ移転作業。
- 外部チームメンバー向けのドキュメント翻訳。

## マイルストーン
1. **M0**: EPIC-001 完了 — `inventory.md` と `classification_policy.md` 承認。
2. **M1**: EPIC-002 完了 — `~/workspace` 作成と移行マッピング承認。
3. **M2**: EPIC-003 完了 — 全リポジトリ移行と検証ログ完了。
4. **M3**: EPIC-004 完了 — レトロスペクティブと改善案策定。

## リスクと緩和策
| リスク | 影響 | 対応策 |
| --- | --- | --- |
| 分類ポリシーの曖昧さ | 移行後の整合性低下 | STORY-002 で判定チェックリストを定義しレビューする |
| 大容量データ移動による時間超過 | 作業ウィンドウの逼迫 | 事前にサイズ見積りを行い、夜間バッチ移行を検討 |
| スクリプトのパス参照切れ | 自動化ツールが失敗 | `rg` による旧パス検出と修正タスクを STORY-005 に含める |
| バックアップ不足 | データ消失リスク | 移行前に TimeMachine/Snapshot を取得し、`backup/` へコピー |

## 承認フロー
- `.ai/prd.md` と `.ai/arch.md` がユーザー承認済みであることを確認後、STORY-001 着手。
- 各ストーリー完了時に `@memory-bank.mdc` を更新し、次ストーリー着手許可を得る。

## 未決事項
- Git 以外の開発ツール (Docker, Node, Python venv) の移行方法。
- `workspace` 内に作成する `README.md` のテンプレート仕様。
- 自動分類スクリプトをどの段階で導入するか。

