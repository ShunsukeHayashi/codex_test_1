---
story_id: STORY-004
epic_id: EPIC-002
status: pending
assignee: unassigned
dependencies: ["STORY-002", "STORY-003"]
---

# STORY-004: リポジトリ移行計画の確定

## 背景
- 棚卸しと分類結果をもとに、リポジトリごとの移行順序や依存関係を整理する必要がある。
- 移行時のリスク (大容量・CI 依存・シンボリックリンク) を考慮した計画が不可欠。

## ゴール
- `docs/migration_plan.md` を最新版に更新し、各リポジトリの移行先・検証手順・リスク対策を記載する。
- 移行をウェーブ (バッチ) 単位で定義し、承認プロセスを整備する。

## スコープ
- 各リポジトリの依存関係調査 (`git remote -v`, `rg` によるパス検索)。
- ウェーブスケジュールとロールバックプランの策定。
- 必要に応じて追加ドキュメント (例: `docs/migration_checklist.md`) の作成。

## 成果物
- 更新済み `docs/migration_plan.md`。
- (オプション) `docs/migration_checklist.md`。
- @memory-bank.mdc の更新。

## 受け入れ条件
- [ ] 各ウェーブの対象リポジトリ、移行先パス、担当者、検証手順、ロールバック策が記載されている。
- [ ] ユーザー承認のためのチェックボックスまたはサインオフ欄が用意されている。
- [ ] 手順書に沿ってテスト実行コマンドが列挙されている。

## テスト戦略
- 代表リポジトリでドライラン (シミュレートした移行) を行い、計画の妥当性を検証。
- 計画の整合性を別ツール (Cursor) でレビュー。

## ログ要件
- 計画策定中に参照したコマンドや補助資料を tool_invocations.log に記録。
- 承認日・承認者を codex_prompt_chain.md に追記。
